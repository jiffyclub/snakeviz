<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="SnakeViz is a browser based graphical viewer for the output of Python's cProfile module.
">
        <meta name="author" content="Matt Davis (jiffyclub)">
        <link rel="canonical" href="https://jiffyclub.github.io/snakeviz/">
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>SnakeViz</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/fontawesome.min.css" rel="stylesheet">
        <link href="css/brands.min.css" rel="stylesheet">
        <link href="css/solid.min.css" rel="stylesheet">
        <link href="css/v4-font-face.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body class="homepage">
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href=".">SnakeViz</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a href="https://github.com/jiffyclub/snakeviz/" class="nav-link"><i class="fa-brands fa-github"></i> GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#snakeviz" class="nav-link">SnakeViz</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#installation" class="nav-link">Installation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#starting-snakeviz" class="nav-link">Starting SnakeViz</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#generating-profiles" class="nav-link">Generating Profiles</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#interpreting-results" class="nav-link">Interpreting Results</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#controls" class="nav-link">Controls</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#notes" class="nav-link">Notes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#contact" class="nav-link">Contact</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="snakeviz">SnakeViz</h1>
<p>SnakeViz is a browser based graphical viewer for the output of Python&rsquo;s
<a href="https://docs.python.org/3/library/profile.html#module-cProfile">cProfile</a> module and an alternative to using the standard library
<a href="https://docs.python.org/3/library/profile.html#module-pstats">pstats module</a>.
It was originally inspired by <a href="http://www.vrplumber.com/programming/runsnakerun/">RunSnakeRun</a>.
SnakeViz works on Python 3.9+.
SnakeViz v2.1.2 and older are still likely to work on Python 2.7,
but official support has been dropped now Python 2 is EOL.</p>
<h2 id="installation">Installation</h2>
<p>SnakeViz is available <a href="https://pypi.org/project/snakeviz/">on PyPI</a>. Install with <a href="https://pip.pypa.io">pip</a>:</p>
<pre><code>python -m pip install snakeviz
</code></pre>
<h2 id="starting-snakeviz">Starting SnakeViz</h2>
<h3 id="command-line-interface">Command Line Interface</h3>
<p>If you have generated a profile file called <code>program.prof</code> you can start
SnakeViz from the command line:</p>
<pre><code>snakeviz program.prof
</code></pre>
<p>Run <code>snakeviz --help</code> to see available options.</p>
<p>Note that you can provide a directory as the argument to <code>snakeviz</code>
and it will launch a file browser interface from which you can select
profiles to view or other directories to list.
For example: <code>snakeviz path/to/directory</code>.</p>
<h3 id="ipython">IPython</h3>
<p>SnakeViz includes IPython line and cell magics for going straight
from code to a visualization.
First load the magics:</p>
<pre><code>%load_ext snakeviz
</code></pre>
<p>Then use the <code>%snakeviz</code> (for a single line of code) and
<code>%%snakeviz</code> (for multiple lines of code) magics to profile and view
individual lines or entire blocks of code:</p>
<pre><code>%snakeviz glob.glob('*.txt')
</code></pre>
<pre><code>%%snakeviz
files = glob.glob('*.txt')
for file in files:
    with open(file) as f:
        print(hashlib.md5(f.read().encode('utf-8')).hexdigest())
</code></pre>
<p>When used within a a Jupyter Notebook the <code>%snakeviz</code> magics
embed the visualization result within the notebook by default.
The <code>--new-tab</code> or <code>-t</code> options can be passed to the magic to instead make
SnakeViz open in a new browser tab.
Opening in a new browser tab is the default behavior when the
<code>%snakeviz</code> magics are used outside of notebooks.</p>
<p>Note: Using the IPython <code>%snakeviz</code> magics requires internet access.
If you are working offline, use <a href="http://ipython.org/ipython-doc/2/api/generated/IPython.core.magics.execution.html#IPython.core.magics.execution.ExecutionMagics.prun">prun</a> to save a profile file
and then start SnakeViz from the command line.</p>
<p>The snakeviz server that is set up can also be configured for
remote access. You can configure the host and port of this 
server using</p>
<pre><code class="language-python">%snakeviz_config -h localhost -p 8900
</code></pre>
<p>A use for this is in running Jupyter in one server, but 
browsing to this from another location. Typically, one does this 
by port forwarding using ssh, in this case one can forward the
specified port to enable snakeviz in the browser.</p>
<h2 id="generating-profiles">Generating Profiles</h2>
<h3 id="cprofile">cProfile</h3>
<p>You can use the <a href="https://docs.python.org/3/library/profile.html#module-cProfile">cProfile</a> module at the command line to create a
profile file for a script:</p>
<pre><code>python -m cProfile -o program.prof my_program.py
</code></pre>
<p>See the <a href="https://docs.python.org/3/library/profile.html#instant-user-s-manual">user&rsquo;s manual</a> for more info and other options.</p>
<p>(Note that SnakeViz <strong>does not</strong> work with profiles generated by the
<code>profile</code> module.)</p>
<h3 id="ipython_1">IPython</h3>
<p>You can also generate profile files of specific code using
IPython&rsquo;s <a href="http://ipython.org/ipython-doc/2/api/generated/IPython.core.magics.execution.html#IPython.core.magics.execution.ExecutionMagics.prun">prun</a> magic using the <code>-D</code> flag:</p>
<pre><code>%prun -D program.prof glob.glob('*.txt')
</code></pre>
<p><code>prun</code> has both line and cell magics available,
see the <a href="http://ipython.org/ipython-doc/2/api/generated/IPython.core.magics.execution.html#IPython.core.magics.execution.ExecutionMagics.prun">IPython docs</a> for more information.</p>
<h2 id="interpreting-results">Interpreting Results</h2>
<p>SnakeViz has two visualization styles, icicle (the default) and sunburst.
In both the fraction of time spent in a function is represented by the
extent of a visualization element, either the width of a rectangle or
the angular extent of an arc.
You can switch between the two styles using the &ldquo;Style&rdquo; dropdown.
(See more below under <a href="#controls">Controls</a>.)</p>
<p>Functions don&rsquo;t only spend time calling other functions, they also have their
own internal time. SnakeViz shows this by putting a special child on each node
that represents internal time. Only functions that call other functions will
have this, functions with no calls are entirely internal time.</p>
<h3 id="icicle">Icicle</h3>
<p><img alt="Example Icicle" src="img/icicle.png" title="Example icicle profile visualization." /></p>
<p>In the icicle visualization style functions are represented by rectangles.
A root function is the top-most rectangle, with functions it calls below it,
then the functions those call below them, and so on.
The amount of time spent inside a function is represented by the width
of the rectangle.
A rectangle that stretches across most of the visualization represents
a function that is taking up most of the time of its calling function,
while a skinny rectangle represents a function that is using hardly
any time at all.</p>
<h3 id="sunburst">Sunburst</h3>
<p><img alt="Example Sunburst" src="img/sunburst.png" title="Example sunburst profile visualization." /></p>
<p>In the sunburst visualization style functions are represented as arcs.
A root function is a circle at the middle, with functions it calls around,
then the functions those functions call, and so on.
The amount of time spent inside a function is represented by
the angular extent of the arc (how far around the circle it goes).
An arc that wraps most of the way around the circle represents a function
that is taking up most of the time of its calling function, while a
skinny arc represents a function that is using hardly any time at all.</p>
<h3 id="function-info">Function Info</h3>
<p>Placing your cursor over a rectangle or arc will highlight that function
and any other visible instances of the same function call.
It will also display a list of information to the left of the sunburst.</p>
<p><img alt="Function info and highlighting" src="img/func_info.png" title="Function info." /></p>
<p>The displayed information includes:</p>
<ul>
<li><strong>Name:</strong> function name</li>
<li><strong>Cumulative Time:</strong> total cumulative amount of time spent in the function
    in seconds and as a percentage of the total program run time</li>
<li><strong>File:</strong> name of the file in which the function is defined</li>
<li><strong>Line:</strong> line number on which the function is defined</li>
<li><strong>Directory:</strong> directory of the file</li>
</ul>
<p>Note: For some built-in functions the file name, line number, and
directory will be &lsquo;~&rsquo;, 0, and blank, respectively.</p>
<h3 id="zooming-and-call-stack">Zooming and Call Stack</h3>
<p>Clicking on a function will zoom the visualization, making that function
the new root and allowing you to magnify different parts of the profile.
Clicking the top bar of the icicle visualization or the center of the sunburst
will zoom out one level and clicking the &ldquo;Reset Zoom&rdquo; button will return the
visualization to its most zoomed-out state.</p>
<p><img alt="Call stack example." src="img/call_stack.png" title="Call stack example." /></p>
<p>To the right of the vizualization is a &ldquo;Call Stack&rdquo; button.
Clicking this will expand a list that shows all the functions
leading up to the current root of the vizualization, with the root function
at the bottom of the list.
The call stack can be useful for orienting yourself when you&rsquo;ve zoomed
into the profile.
Click the &ldquo;Call Stack&rdquo; button again to hide the list.</p>
<h3 id="stats-table">Stats Table</h3>
<p>Below the visualization is a table of profile data similar to the
one you&rsquo;d see working with Python&rsquo;s built-in <a href="https://docs.python.org/3/library/profile.html#module-cProfile">cProfile</a> and <a href="https://docs.python.org/3/library/profile.html#module-pstats">pstats</a>
modules.</p>
<p><img alt="Profile stats table" src="img/stats_table.png" title="Stats table example." /></p>
<p>The table contains one row per unique function called.
Calls to the same function from different places are all grouped into
one row.
The columns are the same as described in the
<a href="https://docs.python.org/3/library/profile.html#instant-user-s-manual">cProfile user&rsquo;s manual</a>:</p>
<ul>
<li><strong>ncalls:</strong> Total number of calls to the function.
    If there are two numbers, that means the function recursed and
    the first is the total number of calls
    and the second is the number of primitive (non-recursive) calls.</li>
<li><strong>tottime:</strong> Total time spent in the function,
    not including time spent in calls to sub-functions</li>
<li><strong>percall:</strong> <code>tottime</code> divided by <code>ncalls</code></li>
<li><strong>cumtime:</strong> Cumulative time spent in this function and all sub-functions</li>
<li><strong>percall:</strong> <code>cumtime</code> divided by <code>ncalls</code></li>
<li><strong>filename:lineno(function):</strong> File name and line number were the
    function is defined, and the function&rsquo;s name</li>
</ul>
<p>The columns of the table are all sortable and the search box can be used
to filter the table based on the <strong>filename:lineno(function)</strong> column.</p>
<p>Clicking on a function in the table will make that function the root
of the visualization.
Clicking the &ldquo;Reset Root&rdquo; button to the left of the visualization will
reset the vizualization to its original root function as determined when
SnakeViz was started.</p>
<h2 id="controls">Controls</h2>
<p>SnakeViz has multiple controls that affect the visualization.
(And clicking the &ldquo;SnakeViz&rdquo; text will bring you to these docs.)</p>
<p><img alt="Visualization Controls" src="img/controls.png" title="Controls" /></p>
<h3 id="reset-zoom">Reset Zoom</h3>
<p>If you&rsquo;ve zoomed into a profile by clicking on the visualization, clicking
the &ldquo;Reset Zoom&rdquo; button will reset the visualization to the currently
selected root function.</p>
<h3 id="reset-root">Reset Root</h3>
<p>If you&rsquo;ve changed the root function by clicking on the <a href="#stats-table">stats table</a>,
clicking the &ldquo;Reset Root&rdquo; button will reset the visualization to the root
function determined when SnakeViz first started.</p>
<h3 id="style">Style</h3>
<p>Use the &ldquo;Style&rdquo; dropdown to switch between the <a href="#icicle">icicle</a> and
<a href="#sunburst">sunburst</a> visualization styles.</p>
<h3 id="depth">Depth</h3>
<p>The &ldquo;Depth&rdquo; dropdown controls how deep into the call stack SnakeViz
goes when building the visualization.
Anything below this depth will not be shown until you zoom in by
clicking on a new function deeper in the call stack.
Increasing the displayed depth will show more of your profile at once,
but it can take longer to build and display the graph.</p>
<h3 id="cutoff">Cutoff</h3>
<p>The &ldquo;Cutoff&rdquo; dropdown controls the display of functions that take up very l
ittle of their parents&rsquo; cumulative time.
If a function&rsquo;s cumulative time divided by its parent&rsquo;s cumulative time
is less than the currently set cutoff, then that function will be displayed
but none of its sub-functions will be.
Setting a larger cutoff may display less of a profile,
but can speed up the building and rendering of the visualization.</p>
<h2 id="notes">Notes</h2>
<ul>
<li>SnakeViz currently only works with files produced by <code>cProfile</code>,
  it will not work with files from the <code>profile</code> module.</li>
<li>SnakeViz will sometimes be unable to create a visualization and will
  show an error.
  This is usually because the visualization is too complex.
  You can make a simpler graph by increasing the cutoff, reducing the depth,
  or profiling a smaller subsection of your code.</li>
<li><code>cProfile</code>&rsquo;s data does not always allow a full reconstruction of where time
  was spent in a program, especially when functions are called multiple
  times from different parts of the code. When that happens SnakeViz can only
  show the total amount of time spent in a function, not the amount spent
  there when called by a specific caller.
  <a href="https://github.com/jiffyclub/snakeviz/issues/112">This issue</a> details
  this limitation.</li>
</ul>
<h2 id="contact">Contact</h2>
<p>If you&rsquo;d like to contribute to SnakeViz you can <a href="https://github.com/jiffyclub/snakeviz">fork it on GitHub</a>.
Please report issues on the <a href="https://github.com/jiffyclub/snakeviz/issues">GitHub issue tracker</a>.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js"></script>
        <script src="search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.6.1
Build Date UTC : 2024-11-09 22:15:40.269614+00:00
-->
